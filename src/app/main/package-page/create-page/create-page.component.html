<ion-header class="ion-no-border">
  <ion-toolbar mode="ios" class="bg-default">
    <!-- <ion-button slot="start" (click)="onback()" fill="clear">
      <ion-icon style="color: white !important;" class="text-dark" name="chevron-back-outline"></ion-icon>
    </ion-button> -->
    <ion-buttons class="pl-3" slot="start">
      <!-- <ion-back-button style="--color:white !important;--color-focused:white !important;" text="" icon="chevron-back-outline"></ion-back-button> -->
      <ion-icon (click)="onback()" style="color: white !important;" name="chevron-back-outline"></ion-icon>
    </ion-buttons>
    <ion-title style="color: white !important;" *ngIf="!isEdit" class="dynamic-font text-dark">Tạo kiện ký gửi</ion-title>
    <ion-title style="color: white !important;" *ngIf="isEdit" class="dynamic-font text-dark">Cập nhật kiện ký gửi</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding" style="--background:white !important;">
  <ion-card mode="ios" style="--background:white !important">
    <ion-card-header>
      <img style="width: 100px;
          height: 100px;
          display: block;
          margin: auto;" src="../../../../assets/image/package-icon.png" alt="">
    </ion-card-header>
    <ion-card-content>
      <div class="alert alert-warning d-flex" role="alert">
        <div class="alert alert-warning d-flex" role="alert" style="margin-top: 1em;">
          <i class="bi bi-exclamation-triangle-fill icon-16 mr-2"></i>
          <div>
            <ion-text class="mb-0 dynamic-font text-dark">
              <b>Lưu ý:</b>
            </ion-text>
            <br>
            <ion-text class="mb-0 dynamic-font text-dark">
              - Có thể tạo nhiều Mã Vận Đơn cùng lúc bằng dấu "," hoặc ":". Ví dụ: mavandon1,mavandon2 hoặc mavandon1;mavandon2
            </ion-text>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>
  <ion-grid [fixed]="true" style="margin: auto">
    <ion-row [formGroup]="formGroup">
      <ion-col size="12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Mã vận đơn</mat-label>
          <input #elePackageCode formControlName="packageCode" matInput>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Phương thức vận chuyển</mat-label>
          <mat-select #eleMovingMethod formControlName="movingMethod">
            <mat-option [value]="1">Nhanh</mat-option>
            <mat-option [value]="2">Chậm</mat-option>
            <mat-option [value]="3">Bộ</mat-option>
            <mat-option [value]="4">Bộ lô</mat-option>
            <mat-option [value]="5">Biển</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Kho</mat-label>
          <mat-select #eleWareHouse formControlName="wareHouse">
            <mat-option [value]="'1'">Đông quản</mat-option>
            <mat-option [value]="'2'">Phật sơn</mat-option>
          </mat-select>
        </mat-form-field>
        <ion-text color="primary">
          <span class="font-weight-bold">Dịch vụ</span>
        </ion-text>
        <div class="d-flex align-items-center justify-content-between">
          <mat-checkbox formControlName="isWoodPackage">Đóng gỗ</mat-checkbox>
          <mat-checkbox formControlName = "isAirPackage">Túi khí</mat-checkbox>
          <mat-checkbox *ngIf="!isReview" formControlName="isInsurance">Bảo hiểm</mat-checkbox>
        </div>
        <ng-container *ngIf="formGroup.value.isInsurance">
          <ion-text color="primary" class="mb-3">
            <span class="font-weight-bold">Kê khai</span>
          </ion-text>
          <mat-form-field appearance="outline" class="w-100 mt-3">
            <mat-label>Tên sản phẩm</mat-label>
            <input #eleDeclaration formControlName="declaration" matInput>
          </mat-form-field>  
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Giá</mat-label>
            <input inputmode="numeric" type="text" (keyup)="valueChange($event,'declarePrice')" #eleDeclarePrice formControlName="declarePrice" matInput>
          </mat-form-field>  
        </ng-container>
        <mat-form-field appearance="outline" class="w-100 mt-2">
          <mat-label>Nhập mô tả</mat-label>
          <textarea formControlName="note" [maxLength]="70" #eleNote matInput></textarea>
        </mat-form-field>
      </ion-col>
    </ion-row>
  </ion-grid>
  <!-- create package -->
  <ion-modal id="modal-dialog" style="--background:white !important" (willDismiss)="cancelCopy()" [isOpen]="isOpenCopy">
    <ng-template>
      <div class="p-3 w-100 h-100">
        <div class="w-100 mb-3">
          <ion-text class="dynamic-font text-center text-dark">
            <h3 class="mx-0 my-0 font-weight-bold">Tìm thấy mã kiện hàng</h3>
          </ion-text>
        </div>
        <div class="w-100 text-center">
          <ion-text class="dynamic-font text-dark">
            <span>Bạn có muốn tạo kiện hàng mới từ mã </span>
          </ion-text>
          <ion-text style="color: var(--ion-color-mat-primary) !important;" class="dynamic-font">
            <span>{{textCopy}}</span>
          </ion-text>
          <ion-text class="dynamic-font text-dark">
            <span>?</span>
          </ion-text>
        </div>
        <div class="d-flex align-items-center justify-content-center mt-3">
          <ion-button (click)="onCopy()" mode="ios" size="default" class="ion-btn-default me-3">
            <ion-text style="color: white !important;" class="dynamic-font">
              Đồng ý
            </ion-text>
          </ion-button>
          <ion-button (click)="cancelCopy()" mode="ios" size="default" color="medium">
            <ion-text style="color: white !important;" class="dynamic-font">
              Hủy bỏ
            </ion-text>
          </ion-button>
        </div>
      </div>
    </ng-template>
  </ion-modal>
  <!-- create package -->
</ion-content>
<ion-footer *ngIf="!isHideFooter" class="ion-no-border" style="box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px, rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;">
  <ng-container *ngIf="!isEdit">
    <ion-toolbar mode="ios" style="--background:white !important">
      <ion-button mode="ios" (click)="save()" class="ion-btn-orange" expand="block">
        <ion-text class="dynamic-font font-weight-bold" style="color: white !important;">
          <span>TẠO KIỆN HÀNG</span>
        </ion-text>
      </ion-button>
    </ion-toolbar>
    <ion-toolbar mode="ios" style="--background:white !important">
      <ion-button mode="ios" (click)="reset()" color="medium" expand="block">
        <ion-text class="dynamic-font font-weight-bold" style="color: white !important;">
          <span>NHẬP LẠI</span>
        </ion-text>
      </ion-button>
    </ion-toolbar>
  </ng-container>
  <ng-container *ngIf="isEdit">
    <ion-toolbar mode="ios" style="--background:white !important">
      <ion-button mode="ios" (click)="update()" color="warning" expand="block">
        <ion-text class="dynamic-font font-weight-bold" style="color: white !important;">
          <span>CẬP NHẬT KIỆN HÀNG</span>
        </ion-text>
      </ion-button>
    </ion-toolbar>
  </ng-container>
  
</ion-footer>