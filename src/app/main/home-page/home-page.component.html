<ion-content style="--background:white !important;">
  <!-- Home Page -->
  <!-- <div class="w-100 p-2 d-flex align-items-center justify-content-between pb-2 ">
    <div class="padding-statusbar-ios">
      <ion-text>
        <h3 class="mx-0 my-0 font-weight-bold dynamic-font text-primary-default">Trakuaidi</h3>
      </ion-text>
    </div>
    <div class="padding-statusbar-ios">
      <img style="width: 2rem;height: 2rem;" src="../../../assets/image/customer-service-headset.png" alt="">
    </div>
  </div> -->
  <ng-container *ngIf="userName && userName === 'admintan'">
    <div class="w-100">
      <div class="w-100 mb-2 padding-statusbar-ios">
        <img class="w-100" src="../../../assets/image/splash.png">
      </div>
      <div class="pl-3 w-100">
        <ion-text class="dynamic-font text-dark">
          <h4 class="mx-0 my-0 font-weight-bold ">Truy cập nhanh</h4>
        </ion-text>
      </div>
      <div class="w-100 p-2">
        <!-- <ion-card (click)="goCreatePackagePage()" mode="ios" class="m-1"
          style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/icon-package.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Tạo mã vận đơn
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text class="dynamic-font text-dark">
                      Tiện lợi và nhanh chóng
                    </ion-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card> -->
      </div>
      <div class="w-100 p-2">
        <ion-card (click)="goPackagePage(0)" mode="ios" class="m-1"
          style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/payment.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Kiện hàng
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text *ngIf="ship1 != undefined" class="dynamic-font text-dark">
                      <span>Có </span><span>{{ship1 | number}}</span><span> đơn hàng</span>
                    </ion-text>
                    <ion-skeleton-text style="width: 80px;" *ngIf="ship1 == undefined" [animated]="true"></ion-skeleton-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="userName && userName != 'admintan'">
    <div class="w-100">
      <div *ngIf="!lstImgSlide" class="padding-statusbar-ios" style="height: 200px;" class="w-100">
        <ion-skeleton-text class="w-100" [animated]="true"></ion-skeleton-text>
      </div>
      <ng-container *ngIf="versionNo != newVersionNo">
        <div class="w-100 mb-2 padding-statusbar-ios">
          <img class="w-100" src="../../../assets/image/splash.png">
        </div>
      </ng-container>
      <ng-container *ngIf="versionNo == newVersionNo">
        <div *ngIf="lstImgSlide && lstImgSlide.length > 0" class="w-100 padding-statusbar-ios">
          <swiper-container #swiperRef [slidesPerView]="1" [slidesPerGroup]="1" [loop]="true" [pagination]="true">
            <ng-container *ngFor="let item of lstImgSlide; index as i">
              <swiper-slide [attr.data-swiper-slide-index]="i">
                <img class="w-100 h-100 mb-5" [src]="'https://tracking.nhanshiphang.vn/'+item?.img">
              </swiper-slide>
            </ng-container>
          </swiper-container>
        </div>
      </ng-container>
      <div class="pl-3 pt-3 w-100">
        <ion-text>
          <h4 class="mx-0 my-0 font-weight-bold dynamic-font text-dark">Dịch vụ</h4>
        </ion-text>
      </div>
      <div class="w-100 p-3">
        <div class="row">
          <div class="col-3">
            <div style="flex-direction: column;" class="d-flex align-items-center justify-content-center text-center">
              <img style="width: 3rem;height:3rem;" (click)="goRechargePage()" src="../../../assets/image/qr-code.png" />
              <ion-text class="dynamic-font text-dark">
                <span>Nạp tiền tự động</span>
              </ion-text>
            </div>
          </div>
          <div class="col-3">
            <div style="flex-direction: column;" class="d-flex align-items-center justify-content-center text-center">
              <img style="width: 3rem;height:3rem;" (click)="goHistoryPage()" src="../../../assets/image/icon-trasaction.png" />
              <ion-text class="dynamic-font text-dark">
                <span>Lịch sử giao dịch</span>
              </ion-text>
            </div>
          </div>
          <div class="col-3">
            <div style="flex-direction: column;" class="d-flex align-items-center justify-content-center text-center">
              <img (click)="goRegulationsPage()" style="width: 3rem;height:3rem;" src="../../../assets/image/package-checking.png" />
              <ion-text class="dynamic-font text-dark">
                <span>Lịch sử điểm tra cứu</span>
              </ion-text>
            </div>
          </div>
          <div class="col-3">
            <div style="flex-direction: column;" class="d-flex align-items-center justify-content-center text-center">
              <img style="width: 3rem;height:3rem;"  (click)="goServicechargePage()" src="../../../assets/image/icon-airport.png" />
              <ion-text class="dynamic-font text-dark">
                <span>Phí vận chuyển</span>
              </ion-text>
            </div>
          </div>
        </div>
      </div>
      <div class="pl-3 w-100">
        <ion-text class="dynamic-font text-dark">
          <h4 class="mx-0 my-0 font-weight-bold ">Truy cập nhanh</h4>
        </ion-text>
      </div>
      <div class="w-100 p-2">
        <ion-card (click)="goCreatePackagePage()" mode="ios" class="m-1"
          style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/box.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Tạo mã vận đơn
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text class="dynamic-font text-dark">
                      Tiện lợi và nhanh chóng
                    </ion-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </div>
      <div class="w-100 p-2">
        <ion-card (click)="goOrderPage(1)" mode="ios" class="m-1"
          style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/payment.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Đơn hàng đang chờ thanh toán
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text *ngIf="ship1 != undefined" class="dynamic-font text-dark">
                      <span>Có </span><span>{{ship1 | number}}</span><span> đơn hàng</span>
                    </ion-text>
                    <ion-skeleton-text style="width: 80px;" *ngIf="ship1 == undefined" [animated]="true"></ion-skeleton-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </div>
      <div class="w-100 p-2">
        <ion-card (click)="goPackagePage(3)" mode="ios" class="m-1"
          style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/plan-delivery.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Kiện hàng đang vận chuyển
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text *ngIf="pack3 != undefined" class="dynamic-font text-dark">
                      <span>Có </span><span>{{pack3 | number}}</span><span> kiện hàng</span>
                    </ion-text>
                    <ion-skeleton-text style="width: 80px;" *ngIf="pack3 == undefined" [animated]="true"></ion-skeleton-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </div>
      <div class="w-100 p-2">
        <ion-card (click)="goOrderPage(2)" mode="ios" class="m-1"
        style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/payment-done.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Đơn hàng đã thanh toán 
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text *ngIf="ship2 != undefined" class="dynamic-font text-dark">
                      <span>Có </span><span>{{ship2 | number}}</span><span> đơn hàng</span>
                    </ion-text>
                    <ion-skeleton-text style="width: 80px;" *ngIf="ship2 == undefined" [animated]="true"></ion-skeleton-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </div>
      <div class="w-100 p-2">
        <ion-card (click)="goPackagePage(5)" mode="ios" class="m-1"
          style="--background:whitesmoke !important;box-shadow: unset !important;border: 1px solid;">
          <ion-card-content class="p-2">
            <ion-list style="background-color:whitesmoke !important;">
              <ion-item style="--background:whitesmoke !important" lines="none">
                <img slot="start" style="width: 4rem;" src="../../../assets/image/delivery-done.png">
                <div style="flex-direction: column;" class="w-100 d-flex">
                  <ion-text class="dynamic-font text-dark font-weight-bold">
                    Kiện hàng đã nhận
                  </ion-text>
                  <div style="white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;">
                    <ion-text *ngIf="pack5 != undefined" class="dynamic-font text-dark">
                      <span>Có </span><span>{{pack5 | number}}</span><span> kiện hàng</span>
                    </ion-text>
                    <ion-skeleton-text style="width: 80px;" *ngIf="pack5 == undefined" [animated]="true"></ion-skeleton-text>
                  </div>
                </div>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
    <div style="position: fixed;bottom: 0;
        margin-bottom: var(--ion-safe-area-bottom, 0);right: 0;" class="p-3">
      <ng-container *ngIf="imgSticket">
        <img (click)="openPopup()" style="width: 6rem;" [src]="'https://tracking.nhanshiphang.vn/'+imgSticket?.img">
      </ng-container>
    </div>
    <!-- <ion-fab style="margin-bottom: var(--ion-safe-area-bottom, 0);" slot="fixed" vertical="bottom" horizontal="end">
      <ion-fab-button (click)="openPopup()" style="--background: none !important;
      --box-shadow: none !important;--background-activated: none !important" size="large">
      <ng-container *ngIf="imgSticket">
        <img [src]="'https://tracking.nhanshiphang.vn/'+imgSticket?.img">
      </ng-container>
      </ion-fab-button>
    </ion-fab> -->
    <!-- Home Page -->
    
    <ion-modal id="modal-dialog" style="--background:none !important;--box-shadow: none !important" (willDismiss)="cancelPopup()" [isOpen]="isPopup">
      <ng-template>
        <div class="w-100">
          <img class="w-100 h-100" (click)="goRechargePage()" style="border-radius: 20px;" [src]="'https://tracking.nhanshiphang.vn/'+imgPopup?.img">
        </div>
        <div class="d-flex align-items-center justify-content-center w-100 mt-3">
          <ion-icon (click)="cancelPopup()" style="font-size: 2rem;" class="text-white" name="close-circle-outline"></ion-icon>
        </div>
      </ng-template>
    </ion-modal>

    <ion-modal id="modal-dialog" style="--background:white !important" (willDismiss)="cancelVersion()" [isOpen]="isPopupVersion">
      <ng-template>
        <div class="p-3 w-100 h-100">
          <div class="w-100 mb-3">
            <ion-text class="dynamic-font text-center text-dark">
              <h3 class="mx-0 my-0 font-weight-bold">Cập nhật phần mềm</h3>
            </ion-text>
          </div>
          <div class="w-100 text-center">
            <ion-text class="dynamic-font text-dark">
              <span>Trakuaidi xin thông báo! Đã có bản cập nhật phần mềm mới, vui lòng Quý khách cập nhật phần mềm để tiếp tục sử dụng. Xin cảm ơn!</span>
            </ion-text>
          </div>
          <div class="d-flex align-items-center justify-content-center mt-3">
            <ion-button (click)="updateVersion()" mode="ios" size="default" class="ion-btn-default me-3">
              <ion-text style="color: white !important;" class="dynamic-font">
                Đồng ý
              </ion-text>
            </ion-button>
          </div>
        </div>
      </ng-template>
    </ion-modal>

    <!-- create package -->
  <ion-modal id="modal-dialog" style="--background:white !important" (willDismiss)="cancelCopy()" [isOpen]="isOpenCopy">
    <ng-template>
      <div class="p-3 w-100 h-100">
        <div class="w-100 mb-3">
          <ion-text class="dynamic-font text-center text-dark">
            <h3 class="mx-0 my-0 font-weight-bold">Tìm thấy mã kiện hàng</h3>
          </ion-text>
        </div>
        <div class="w-100 text-center">
          <ion-text class="dynamic-font text-dark">
            <span>Quý khách có muốn tạo kiện hàng mới từ mã </span>
          </ion-text>
          <ion-text style="color: var(--ion-color-mat-primary) !important;" class="dynamic-font">
            <span>{{textCopy}}</span>
          </ion-text>
          <ion-text class="dynamic-font text-dark">
            <span>?</span>
          </ion-text>
        </div>
        <div class="d-flex align-items-center justify-content-center mt-3">
          <ion-button (click)="onCopy()" mode="ios" size="default" class="ion-btn-default pr-3">
            <ion-text style="color: white !important;" class="dynamic-font">
              Đồng ý
            </ion-text>
          </ion-button>
          <ion-button (click)="cancelCopy()" mode="ios" size="default" color="medium">
            <ion-text style="color: white !important;" class="dynamic-font">
              Hủy bỏ
            </ion-text>
          </ion-button>
        </div>
      </div>
    </ng-template>
  </ion-modal>
  <!-- create package -->
  </ng-container>
</ion-content>